<div cg-busy="vm.libraryLoadingPromise"></div>
<div class="offerings-editor">
    <ul class="library-accordion">
        <li carli-accordion ng-repeat="library in vm.libraryList">
            <header ng-click="vm.loadOfferingsForLibrary(library)" cg-busy="vm.loadingPromise[library.id]">
                <button type="button" class="angle-icon-container">
                    <fa name="angle-down"></fa>
                </button>
                <library-info library="library" class="inline"></library-info>
            </header>
            <div class="content">
                <ul class="offerings-list">
                    <li class="column-headers">
                        <div class="sortable column product" ng-class="{ activeSort: vm.orderBy === 'product.name', reversedSort: vm.reverse }" ng-click="vm.sort('product.name')">Product</div>
                        <div class="sortable column vendor" ng-class="{ activeSort: vm.orderBy === 'product.vendor.name', reversedSort: vm.reverse }" ng-click="vm.sort('product.vendor.name')">Vendor</div>
                        <div class="column library-view">Library View</div>
                        <div class="sortable column site-license-price" ng-class="{activeSort: vm.orderBy === 'pricing.site', reversedSort: vm.reverse }" ng-click="vm.sort('pricing.site')">Site License Price</div>
                        <div class="sortable column flag" ng-class="{ activeSort: vm.orderBy === 'flagged', reversedSort: vm.reverse }" ng-click="vm.sort('flagged')">Flag</div>
                    </li>
                    <li class="offering" ng-class="{ 'edit-mode': vm.isEditing[offering.id] }" ng-repeat="offering in vm.offerings[library.id] | orderBy:vm.orderBy:vm.reverse track by offering.id">
                        <edit-offering ng-if="vm.isEditing[offering.id]" cycle="::cycle" offering="offering" columns="::vm.offeringColumns" on-offering-saved="::vm.stopEditing"></edit-offering>
                        <render-offering offering="offering" cycle="::vm.cycle" columns="::vm.offeringColumns"></render-offering>
                    </li>
                </ul>
                <div class="footer">
                    <div class="placeholder pull-left" style="width: 250px;">Print Email Export</div>
                    <div class="placeholder pull-right" style="width: 250px;">Vendor Pricing Entry</div>
                </div>
            </div>
        </li>
    </ul>
</div>
